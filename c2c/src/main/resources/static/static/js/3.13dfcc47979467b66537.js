webpackJsonp([3],{CgFE:function(e,t,i){"use strict";t.a=function(e){return Object(n.a)({url:"/meeting/createMeeting",method:"POST",data:s.a.stringify(e)})},t.c=function(e){return Object(n.a)({url:"/meeting/startMeeting",method:"POST",data:s.a.stringify({meetingId:e})})},t.b=function(e){return Object(n.a)({url:"/meeting/endMeeting",method:"POST",data:s.a.stringify({meetingId:e})})};var n=i("vLgD"),a=i("6iV/"),s=i.n(a)},IDjp:function(e,t,i){var n=i("ioxY");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("8bSs")("4284df00",n,!0)},ioxY:function(e,t,i){(e.exports=i("BkJT")(!1)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},nH3j:function(e,t,i){var n=i("utF+");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("8bSs")("b413febe",n,!0)},"utF+":function(e,t,i){(e.exports=i("BkJT")(!1)).push([e.i,"\n.upload-demo[data-v-b2baf500] {\n  min-height: 500px;\n}\n.uploader-example[data-v-b2baf500] {\n  width: 100%;\n  padding: 15px;\n  margin: 40px auto 0;\n  font-size: 12px;\n  -webkit-box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);\n          box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);\n}\n.uploader-example .uploader-btn[data-v-b2baf500] {\n  margin-right: 4px;\n}\n.uploader-example .uploader-list[data-v-b2baf500] {\n  max-height: 440px;\n  overflow: auto;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n",""])},vo6F:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("vLgD");function a(e){return Object(n.a)({url:"/file/zipFile",method:"POST",params:{meetingId:e}})}var s=i("uAC3"),r=i.n(s),o=i("CgFE"),l={name:"index",data:function(){return{files:{},attrs:{accept:"*"},dialogStatus:"meetingCreate",dialogFormVisible:!1,isCreateMeeting:!1,meetingId:void 0,textMap:{meetingCreate:"创建会议"},meetingForm:{meetingTime:"",meetingName:"",meetingAddr:""},meetingResponse:{},ruleForm:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},fileList:[],rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],region:[{required:!0,message:"请选择活动区域",trigger:"change"}],date1:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],date2:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],type:[{type:"array",required:!0,message:"请至少选择一个活动性质",trigger:"change"}],resource:[{required:!0,message:"请选择活动资源",trigger:"change"}],desc:[{required:!0,message:"请填写活动形式",trigger:"blur"}]}}},created:function(){this.isCreateMeeting=r.a.get("isCreateMeeting"),this.meetingId=r.a.get("meetingId")},methods:{getFolderContent:function(){var e,t=this;this.fileList=[],(e=this.meetingId,Object(n.a)({url:"/file/getFolder",method:"GET",params:{meetingId:e}})).then(function(e){if(e.success)for(var i=0;i<e.data.length;i++){var n=e.data[i];n.indexOf(".")>-1?t.fileList.push({name:n,url:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1530349351265&di=f77a9213bf2b45026c6c81869dc644d8&imgtype=0&src=http%3A%2F%2Fpic.90sjimg.com%2Fdesign%2F00%2F07%2F85%2F23%2F59310eab886e2.png"}):t.fileList.push({name:n,url:"https://ss0.bdstatic.com/94oJfD_bAAcT8t7mm9GUKT-xh_/timg?image&quality=100&size=b4000_4000&sec=1530339201&di=7687de30143868ea2d9e572517894128&src=http://image.tupian114.com/20140417/13325010.png"})}})},uploadOptions:function(){return{target:function(e){},testChunks:!1,query:{meetingId:this.meetingId}}},handleCancel:function(){this.dialogFormVisible=!1},submitForm:function(e){this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!")})},resetForm:function(e){this.$refs[e].resetFields()},submitUpload:function(){var e=this;if(console.log(this.fileList),this.isCreateMeeting){var t=this.$loading({lock:!0,text:"拼命上传中……",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});a(this.meetingId).then(function(i){t.close(),i.success?e.$message.success(i.message):e.$message.error(i.message)})}else this.$message.warning("请首先创建会议！")},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleSuccess:function(e){this.$message(e.message)},handleError:function(){this.$message("上传失败，未知错误！")},handleMeeting:function(){this.dialogStatus="meetingCreate",this.dialogFormVisible=!0},handleCreateMeeting:function(){var e=this,t=this;r.a.set("meetingForm",this.meetingForm),this.meetingForm.meetingTime=new Date(this.meetingForm.meetingTime).getTime(),Object(o.a)(this.meetingForm).then(function(i){t.meetingResponse=i.data;var n=i.data.meeting_id;e.meetingId=n,r.a.set("meetingForm",e.meetingForm),r.a.set("meetingId",n),r.a.set("isCreateMeeting",!0),r.a.set("meetingStatus",0),e.isCreateMeeting=!0,e.dialogFormVisible=!1,e.$message.success("创建会议成功！如需修改会议信息，请在选票模块开始会议时修改！")})},beforeAvatarUpload:function(e){var t=this,i=this.$loading({lock:!0,text:"拼命上传中……",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),n=new FormData;return n.append("file",e),n.append("meetingId",this.meetingId),a(n).then(function(e){i.close(),e.success?t.$message.success(e.message):t.$message.error(e.message)}),!1},clearList:function(){this.$refs.upload.clearFiles()}}},m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tab-container"},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/vote/file/upload/","list-type":"picture",multiple:!0,"before-upload":e.beforeAvatarUpload,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,"on-success":e.handleSuccess,"on-error":e.handleError,"auto-upload":!1}},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{slot:"trigger",size:"small",type:"primary",disabled:""},slot:"trigger"},[e._v("选取文件")]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.getFolderContent}},[e._v("刷新")]),e._v(" "),i("el-button",{attrs:{icon:"el-icon-caret-right",size:"small",type:"success"},on:{click:e.handleMeeting}},[e._v("创建会议")]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"warning"},on:{click:e.clearList}},[e._v("清空列表")])],1),e._v(" "),i("el-tag",{attrs:{type:"primary",size:"large"}},[e._v("当前会议ID："+e._s(e.meetingId)+"请将文件保存在以当前会议ID命名的文件夹下")]),e._v(" "),e.meetingId?e._e():i("el-tag",{attrs:{type:"danger",size:"large"}},[e._v("当前无会议请创建会议！")]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("上传文件列表")]),e._v(" "),i("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,top:"10vh"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{staticStyle:{width:"400px","margin-left":"50px"},attrs:{"label-position":"left","label-width":"70px"}},[i("el-form-item",{attrs:{label:"会议名称"}},[i("el-input",{model:{value:e.meetingForm.meetingName,callback:function(t){e.$set(e.meetingForm,"meetingName",t)},expression:"meetingForm.meetingName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"会议时间"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"12:00:00"},model:{value:e.meetingForm.meetingTime,callback:function(t){e.$set(e.meetingForm,"meetingTime",t)},expression:"meetingForm.meetingTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"会议地点"}},[i("el-input",{model:{value:e.meetingForm.meetingAddr,callback:function(t){e.$set(e.meetingForm,"meetingAddr",t)},expression:"meetingForm.meetingAddr"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handleCancel}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleCreateMeeting}},[e._v("确认")])],1)],1)],1)},staticRenderFns:[]};var g={name:"index",components:{Directory:i("/Xao")(l,m,!1,function(e){i("nH3j")},"data-v-b2baf500",null).exports}},d={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"app-container"},[t("el-tabs",{attrs:{type:"border-card"}},[t("el-tab-pane",{attrs:{label:"设置文件夹"}},[t("directory")],1),this._v(" "),t("el-tab-pane",{attrs:{label:"更新客户端"}},[this._v("此功能暂未开放")])],1)],1)},staticRenderFns:[]};var c=i("/Xao")(g,d,!1,function(e){i("IDjp")},"data-v-04b0e9c8",null);t.default=c.exports}});